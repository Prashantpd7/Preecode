<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Preecode – Settings</title>
  <script src="/theme.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/tailwind-config.js"></script>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body class="bg-th-bg text-txt font-sans min-h-screen text-sm antialiased">

  <div class="app-shell min-h-screen relative z-10">
    <div class="app-main flex-1 flex flex-col">
      <div class="page-content flex-1 p-4 md:p-7 max-w-[1200px] w-full mx-auto opacity-0 animate-fade-in">

        <!-- Page Header -->
        <div class="mb-6 opacity-0 animate-fade-in-1">
          <h1 class="text-xl font-extrabold tracking-tight text-txt">Settings</h1>
          <p class="text-[13px] text-txt-sec mt-1">Manage your account, preferences, and security.</p>
        </div>

        <!-- Settings Grid -->
        <div class="settings-layout opacity-0 animate-fade-in-2">

          <!-- ── Left Nav ── -->
          <nav class="settings-nav">
            <button type="button" class="settings-nav-item active" data-section="account">
              <svg class="settings-nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
              Account
            </button>
            <button type="button" class="settings-nav-item" data-section="appearance">
              <svg class="settings-nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402M6.75 21A3.75 3.75 0 013 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 003.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008z"/></svg>
              Appearance
            </button>
            <button type="button" class="settings-nav-item" data-section="security">
              <svg class="settings-nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
              Security
            </button>
            <button type="button" class="settings-nav-item" data-section="notifications">
              <svg class="settings-nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"/></svg>
              Notifications
            </button>
            <button type="button" class="settings-nav-item danger" data-section="danger">
              <svg class="settings-nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/></svg>
              Danger Zone
            </button>
          </nav>

          <!-- ── Right Content ── -->
          <div class="settings-content">

            <!-- ═══ Account Section ═══ -->
            <div class="settings-section active" id="section-account">
              <div class="app-card p-6">
                <h3 class="text-base font-bold text-txt mb-1">Account Details</h3>
                <p class="text-xs text-txt-faint mb-6">Update your personal information.</p>

                <!-- Avatar row -->
                <div class="flex items-center gap-5 mb-6">
                  <div class="settings-avatar" id="settingsAvatar">?</div>
                  <div>
                    <p class="text-sm font-semibold text-txt mb-1" id="settingsAvatarName">User</p>
                    <button type="button" id="avatarUploadBtn" class="text-xs text-accent font-medium hover:text-accent-hover transition-colors cursor-pointer bg-transparent border-none p-0">Change avatar</button>
                    <input type="file" id="avatarFileInput" accept="image/*" class="hidden" />
                  </div>
                </div>

                <form id="accountForm" class="space-y-5" novalidate>
                  <!-- Name fields -->
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                      <label for="settFirstName" class="auth-label">First name</label>
                      <input type="text" id="settFirstName" placeholder="First name" class="auth-input" autocomplete="given-name" />
                    </div>
                    <div>
                      <label for="settLastName" class="auth-label">Last name</label>
                      <input type="text" id="settLastName" placeholder="Last name" class="auth-input" autocomplete="family-name" />
                    </div>
                  </div>

                  <!-- Username -->
                  <div>
                    <label for="settUsername" class="auth-label">Username</label>
                    <input type="text" id="settUsername" placeholder="username" class="auth-input" autocomplete="username" />
                    <p class="text-[11px] text-txt-faint mt-1.5">Letters, numbers, underscores only. 3–20 characters.</p>
                  </div>

                  <!-- Email (readonly) -->
                  <div>
                    <label for="settEmail" class="auth-label">Email</label>
                    <input type="email" id="settEmail" class="auth-input" disabled style="opacity:0.5;cursor:not-allowed;" />
                  </div>

                  <!-- Save -->
                  <div class="flex justify-end pt-2">
                    <button type="submit" class="auth-btn-primary" style="width:auto;padding:10px 28px;">Save Changes</button>
                  </div>
                </form>
              </div>
            </div>

            <!-- ═══ Appearance Section ═══ -->
            <div class="settings-section" id="section-appearance">
              <div class="app-card p-6">
                <h3 class="text-base font-bold text-txt mb-1">Appearance</h3>
                <p class="text-xs text-txt-faint mb-6">Choose your preferred theme.</p>
                <div class="grid grid-cols-2 gap-2.5" id="settingsThemeSelector">
                  <!-- Dark -->
                  <button type="button" data-theme-value="dark"
                    class="theme-option flex flex-col items-center gap-2 p-2.5 rounded-xl border border-bdr cursor-pointer transition-all duration-200 hover:border-accent/30">
                    <div class="w-full h-14 rounded-lg bg-[#0f0f0f] border border-[rgba(255,255,255,0.06)] flex flex-col p-1.5 gap-0.5">
                      <div class="w-5 h-1 rounded bg-[rgba(255,255,255,0.1)]"></div>
                      <div class="w-8 h-1 rounded bg-[rgba(255,255,255,0.06)]"></div>
                      <div class="flex-1 mt-0.5 rounded bg-[#1a1a1a] border border-[rgba(255,255,255,0.04)]"></div>
                    </div>
                    <div class="flex items-center gap-1.5">
                      <svg class="w-3 h-3 text-txt-muted" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
                      <span class="text-[10px] font-semibold text-txt-sec">Dark</span>
                    </div>
                  </button>
                  <!-- Light -->
                  <button type="button" data-theme-value="light"
                    class="theme-option flex flex-col items-center gap-2 p-2.5 rounded-xl border border-bdr cursor-pointer transition-all duration-200 hover:border-accent/30">
                    <div class="w-full h-14 rounded-lg bg-[#f5f6f8] border border-[rgba(0,0,0,0.08)] flex flex-col p-1.5 gap-0.5">
                      <div class="w-5 h-1 rounded bg-[rgba(0,0,0,0.1)]"></div>
                      <div class="w-8 h-1 rounded bg-[rgba(0,0,0,0.06)]"></div>
                      <div class="flex-1 mt-0.5 rounded bg-white border border-[rgba(0,0,0,0.05)]"></div>
                    </div>
                    <div class="flex items-center gap-1.5">
                      <svg class="w-3 h-3 text-txt-muted" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                      <span class="text-[10px] font-semibold text-txt-sec">Light</span>
                    </div>
                  </button>
                </div>
              </div>
            </div>

            <!-- ═══ Security Section ═══ -->
            <div class="settings-section" id="section-security">
              <!-- Change Password -->
              <div class="app-card p-6 mb-5">
                <h3 class="text-base font-bold text-txt mb-1">Change Password</h3>
                <p class="text-xs text-txt-faint mb-5">Use a strong password you don't use elsewhere.</p>
                <form id="passwordForm" class="space-y-4" novalidate>
                  <div>
                    <label for="settCurrentPw" class="auth-label">Current password</label>
                    <input type="password" id="settCurrentPw" placeholder="Enter current password" class="auth-input" autocomplete="current-password" />
                  </div>
                  <div>
                    <label for="settNewPw" class="auth-label">New password</label>
                    <input type="password" id="settNewPw" placeholder="Min 6 characters" class="auth-input" autocomplete="new-password" />
                  </div>
                  <div>
                    <label for="settConfirmPw" class="auth-label">Confirm new password</label>
                    <input type="password" id="settConfirmPw" placeholder="Re-enter new password" class="auth-input" autocomplete="new-password" />
                  </div>
                  <div id="pwError" class="text-[13px] text-red-400 min-h-[20px]" role="alert" aria-live="polite"></div>
                  <div class="flex justify-end">
                    <button type="submit" class="auth-btn-primary" style="width:auto;padding:10px 28px;">Update Password</button>
                  </div>
                </form>
              </div>

              <!-- Logout All Devices -->
              <div class="app-card p-6 mb-5">
                <h3 class="text-base font-bold text-txt mb-1">Active Sessions</h3>
                <p class="text-xs text-txt-faint mb-4">Log out from all other devices and sessions.</p>
                <button type="button" id="logoutAllBtn" class="px-5 py-2.5 bg-th-hover hover:bg-th-surface text-txt font-semibold text-sm rounded-lg border border-bdr transition-colors cursor-pointer">
                  Logout All Devices
                </button>
              </div>

              <!-- 2FA Placeholder -->
              <div class="app-card p-6">
                <h3 class="text-base font-bold text-txt mb-1">Two-Factor Authentication</h3>
                <p class="text-xs text-txt-faint mb-4">Add an extra layer of security to your account.</p>
                <div class="settings-2fa-placeholder">
                  <svg class="w-8 h-8 mx-auto mb-2 text-txt-faint" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg>
                  <p class="text-xs font-semibold text-txt-muted">Coming Soon</p>
                  <p class="text-[11px] text-txt-faint mt-1">2FA will be available in a future update.</p>
                </div>
              </div>
            </div>

            <!-- ═══ Notifications Section ═══ -->
            <div class="settings-section" id="section-notifications">
              <div class="app-card p-6">
                <h3 class="text-base font-bold text-txt mb-1">Notification Preferences</h3>
                <p class="text-xs text-txt-faint mb-2">Choose what notifications you'd like to receive.</p>
                <div class="settings-toggle-list">
                  <div class="settings-toggle-row">
                    <div class="settings-toggle-info">
                      <p class="settings-toggle-label">Email Notifications</p>
                      <p class="settings-toggle-desc">Receive important updates and activity summaries via email.</p>
                    </div>
                    <label class="toggle-switch">
                      <input type="checkbox" id="notifEmail" checked />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="settings-toggle-row">
                    <div class="settings-toggle-info">
                      <p class="settings-toggle-label">Streak Reminders</p>
                      <p class="settings-toggle-desc">Get reminded when your streak is about to break.</p>
                    </div>
                    <label class="toggle-switch">
                      <input type="checkbox" id="notifStreak" checked />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="settings-toggle-row">
                    <div class="settings-toggle-info">
                      <p class="settings-toggle-label">Product Announcements</p>
                      <p class="settings-toggle-desc">Stay updated with new features and improvements.</p>
                    </div>
                    <label class="toggle-switch">
                      <input type="checkbox" id="notifAnnounce" checked />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="settings-toggle-row">
                    <div class="settings-toggle-info">
                      <p class="settings-toggle-label">Marketing Emails</p>
                      <p class="settings-toggle-desc">Occasional tips, guides, and promotional content.</p>
                    </div>
                    <label class="toggle-switch">
                      <input type="checkbox" id="notifMarketing" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- ═══ Danger Zone Section ═══ -->
            <div class="settings-section" id="section-danger">
              <div class="danger-zone-card">
                <div class="flex items-center gap-2 mb-3">
                  <svg class="w-4 h-4 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/></svg>
                  <span class="text-xs font-bold uppercase tracking-wider text-red-400">Danger Zone</span>
                </div>
                <p class="text-xs text-txt-faint mb-2">Permanently delete your account and all associated data. This action cannot be undone.</p>
                <p class="text-xs text-txt-faint mb-5">All your submissions, progress, streaks, and settings will be lost forever.</p>
                <button type="button" id="deleteAccountBtn" class="logout-btn">
                  <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"/></svg>
                  Delete Account
                </button>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Delete Account Confirmation Modal -->
  <div id="deleteModal" class="modal-overlay hidden">
    <div class="modal-panel" style="max-width:420px;">
      <div class="p-6 text-center">
        <div class="w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4">
          <svg class="w-6 h-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"/></svg>
        </div>
        <h3 class="text-lg font-bold text-txt mb-2">Delete Account?</h3>
        <p class="text-sm text-txt-sec mb-4">This action is permanent. All your data will be erased and cannot be recovered.</p>
        <p class="text-xs text-txt-muted mb-3">Type <strong class="text-red-400">DELETE</strong> to confirm:</p>
        <input type="text" id="deleteConfirmInput" placeholder="Type DELETE" class="w-full px-4 py-2.5 bg-th-input border border-bdr-strong rounded-lg text-txt text-center placeholder-txt-faint focus:border-red-400 focus:outline-none transition-colors mb-5" autocomplete="off" />
        <div class="flex gap-3">
          <button id="cancelDelete" class="flex-1 px-4 py-2.5 bg-th-hover hover:bg-th-surface text-txt font-semibold rounded-lg border border-bdr transition-colors cursor-pointer">Cancel</button>
          <button id="confirmDelete" disabled class="flex-1 px-4 py-2.5 bg-red-500/20 text-red-400 font-semibold rounded-lg border border-red-500/30 transition-colors cursor-not-allowed opacity-50">Delete Forever</button>
        </div>
      </div>
    </div>
  </div>

  <script src="/api.js"></script>
  <script src="/layout/layout.js"></script>
  <script src="/layout/chatbot.js"></script>
  <script src="/layout/early-access.js"></script>
  <script src="/pages/settings.js"></script>
</body>
</html>
